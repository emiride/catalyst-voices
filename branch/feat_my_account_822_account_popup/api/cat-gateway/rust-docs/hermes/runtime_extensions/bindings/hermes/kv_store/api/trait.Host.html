<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `Host` trait in crate `hermes`."><title>Host in hermes::runtime_extensions::bindings::hermes::kv_store::api - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../../../static.files/rustdoc-492a78a4a87dcc01.css"><meta name="rustdoc-vars" data-root-path="../../../../../../" data-static-root-path="../../../../../../static.files/" data-current-crate="hermes" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0-nightly (0d634185d 2024-08-29)" data-channel="nightly" data-search-js="search-acd2e111c9cb27e3.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../../../static.files/main-cb0df477c2d67d00.js"></script><noscript><link rel="stylesheet" href="../../../../../../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../../../hermes/index.html">hermes</a><span class="version">0.0.1</span></h2></div><h2 class="location"><a href="#">Host</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.kv_add">kv_add</a></li><li><a href="#tymethod.kv_cas">kv_cas</a></li><li><a href="#tymethod.kv_get">kv_get</a></li><li><a href="#tymethod.kv_get_default">kv_get_default</a></li><li><a href="#tymethod.kv_get_set">kv_get_set</a></li><li><a href="#tymethod.kv_set">kv_set</a></li><li><a href="#tymethod.kv_subscribe">kv_subscribe</a></li><li><a href="#tymethod.kv_unsubscribe">kv_unsubscribe</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In hermes::<wbr>runtime_<wbr>extensions::<wbr>bindings::<wbr>hermes::<wbr>kv_<wbr>store::<wbr>api</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../../../../../index.html">hermes</a>::<wbr><a href="../../../../index.html">runtime_extensions</a>::<wbr><a href="../../../index.html">bindings</a>::<wbr><a href="../../index.html">hermes</a>::<wbr><a href="../index.html">kv_store</a>::<wbr><a href="index.html">api</a>::<wbr><a class="trait" href="#">Host</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../../../../src/hermes/runtime_extensions/bindings.rs.html#13-16">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait Host {
    // Required methods
    fn <a href="#tymethod.kv_set" class="fn">kv_set</a>(&amp;mut self, key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>, value: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.kv_get_default" class="fn">kv_get_default</a>(
        &amp;mut self,
        key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
        default: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
    ) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.kv_get" class="fn">kv_get</a>(&amp;mut self, key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.kv_get_set" class="fn">kv_get_set</a>(
        &amp;mut self,
        key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
        value: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
    ) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.kv_add" class="fn">kv_add</a>(
        &amp;mut self,
        key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
        value: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
    ) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.kv_cas" class="fn">kv_cas</a>(
        &amp;mut self,
        key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
        test: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
        value: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
    ) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.kv_subscribe" class="fn">kv_subscribe</a>(&amp;mut self, key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.kv_unsubscribe" class="fn">kv_unsubscribe</a>(&amp;mut self, key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;;
}</code></pre><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.kv_set" class="method"><a class="src rightside" href="../../../../../../src/hermes/runtime_extensions/bindings.rs.html#13-16">source</a><h4 class="code-header">fn <a href="#tymethod.kv_set" class="fn">kv_set</a>(&amp;mut self, key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>, value: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Set a value in the local key-value store
Setting None will cause the Key to be deleted from the KV store.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.kv_get_default" class="method"><a class="src rightside" href="../../../../../../src/hermes/runtime_extensions/bindings.rs.html#13-16">source</a><h4 class="code-header">fn <a href="#tymethod.kv_get_default" class="fn">kv_get_default</a>(
    &amp;mut self,
    key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
    default: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Get a value from the local key-value store
Returns the default if not set.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.kv_get" class="method"><a class="src rightside" href="../../../../../../src/hermes/runtime_extensions/bindings.rs.html#13-16">source</a><h4 class="code-header">fn <a href="#tymethod.kv_get" class="fn">kv_get</a>(&amp;mut self, key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Get a value from the local key-value store
Returns None if the Key does not exist in the KV Store.
This is a convenience function, and is equivalent to <code>kv-get-default(key, none)</code></p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.kv_get_set" class="method"><a class="src rightside" href="../../../../../../src/hermes/runtime_extensions/bindings.rs.html#13-16">source</a><h4 class="code-header">fn <a href="#tymethod.kv_get_set" class="fn">kv_get_set</a>(
    &amp;mut self,
    key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
    value: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Get a value, and then set it (Atomic)
Setting None will cause the Key to be deleted from the KV store.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.kv_add" class="method"><a class="src rightside" href="../../../../../../src/hermes/runtime_extensions/bindings.rs.html#13-16">source</a><h4 class="code-header">fn <a href="#tymethod.kv_add" class="fn">kv_add</a>(
    &amp;mut self,
    key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
    value: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Get a value, and then add to it (Atomic)
Adding to a string will concatenate the string.
String concatenation will only occur up to the maximum possible size of a string value.<br />
Concatenation beyond the maximum size will result in truncation.
Adding to a numeric will have the expected behavior (rounded to nearest if necessary).
The original type does not change, so: <code>float64 + u64 = float64</code>.  <code>s64 + float64 = s64</code>
If the value overflows or under-flows it will saturate at the limit.
This behavior allows us to decrement values by using the signed version, so <code>u64(10) + s64(-5) = u64(5))</code>
If a string is added to a numeric, nothing happens.
If a numeric is added to a string, it is converted to a string first, and then concatenated
Note: There will be no spaces added.  So “My string” + u32(77) = “My string77”</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.kv_cas" class="method"><a class="src rightside" href="../../../../../../src/hermes/runtime_extensions/bindings.rs.html#13-16">source</a><h4 class="code-header">fn <a href="#tymethod.kv_cas" class="fn">kv_cas</a>(
    &amp;mut self,
    key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>,
    test: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
    value: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;,
) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Check if the Key equals a test value (exact match) and if it does, store the new value.
In all cases, the current value is returned.
If the types are NOT the same, the comparison will fail, even if the values are equivalent.
For example: <code>u64(7) != s64(7)</code>, <code>float64(-1) != s64(-1)</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.kv_subscribe" class="method"><a class="src rightside" href="../../../../../../src/hermes/runtime_extensions/bindings.rs.html#13-16">source</a><h4 class="code-header">fn <a href="#tymethod.kv_subscribe" class="fn">kv_subscribe</a>(&amp;mut self, key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Subscribe to any updates made to a particular Key.
After this call, this module will receive Key Update events when a key is written.
It returns the current value of the Key and None if it is not set.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.kv_unsubscribe" class="method"><a class="src rightside" href="../../../../../../src/hermes/runtime_extensions/bindings.rs.html#13-16">source</a><h4 class="code-header">fn <a href="#tymethod.kv_unsubscribe" class="fn">kv_unsubscribe</a>(&amp;mut self, key: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="type" href="https://docs.rs/anyhow/1.0.88/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="enum.KvValues.html" title="enum hermes::runtime_extensions::bindings::hermes::kv_store::api::KvValues">KvValues</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Unsubscribe to any updates made to a particular Key.
After this call, this module will no longer receive Key Update events when a key is written.
It returns the current value of the Key and None if it is not set.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-Host-for-HermesRuntimeContext" class="impl"><a class="src rightside" href="../../../../../../src/hermes/runtime_extensions/hermes/kv_store/host.rs.html#8-86">source</a><a href="#impl-Host-for-HermesRuntimeContext" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.Host.html" title="trait hermes::runtime_extensions::bindings::hermes::kv_store::api::Host">Host</a> for <a class="struct" href="../../../../../runtime_context/struct.HermesRuntimeContext.html" title="struct hermes::runtime_context::HermesRuntimeContext">HermesRuntimeContext</a></h3></section></div><script src="../../../../../../trait.impl/hermes/runtime_extensions/bindings/hermes/kv_store/api/trait.Host.js" async></script></section></div></main></body></html>